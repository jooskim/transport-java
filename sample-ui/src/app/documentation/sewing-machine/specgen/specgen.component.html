<h1>SpecGen - CLI</h1>

<h3>The Application Seeder Engine</h3>

<p>
    While <strong class="emphasis">SpecGen</strong> is not a part of the pipeline for the execution of the suite
    for the  <strong class="emphasis">Intent Compiler</strong>, It is a powerful tool for starting a new project
    by automatically generating Service Adapter Specification Documents just by scanning an API Sepcification Document,
    Which can then be tailored as desired. It is best used in conjunction through indirect execution
    by <code class="clr-code">appfabinit</code>.
</p>
<p>
    SpecGen scans the provided API Specification YAML and creates Service Adapter Specification Documents. If
    it encounters <code class="clr-code">x-vmware-service-name</code> in the API Specification Document, it
    will attempt to group all APIs with that extension under a single Service Adapter Specification. The specifications
    contain Service Adapter requests for <strong class="emphasis">all</strong> the API calls encountered in the
    API Specification Document. UI developers may want to discard API calls that they do not use. Additonally,
    SpecGen creates specifications for every <code class="clr-code">enum</code> encountered in the
    API Specification Document.
</p>
<p>
    With the <code class="clr-code">--proxy</code> option, SpecGen will create a <strong class="emphasis">proxy.config.json</strong>
    file, using <code class="clr-code">host</code>, <code class="clr-code">port</code>, and the the most secure
    <code class="clr-code">scheme</code> from the specifications in the API Document.
</p>

<p>
    Finally, SpecGen creates a <strong class="emphasis">Component Specification Document</strong> for use by <code class="clr-code">AppGen</code>
    and which references every autogeneratable Service Adapter from the component(s). These should be regarded as a starting point
    and it is expected that the specifications will be massaged by the developer according to need.
</p>
<p>
    More details about the various autogenerated specification documents are contained in the subsequent chapter on
    advanced usage.
</p>

<hr/>

<h2>
    Specifications and Languages
</h2>

<p>
    As with all <strong class="emphasis">Sewing Machine</strong> components, SpecGen employs a plugin architecture
    to generate code in a variety of languages.
    At the time of writing this, SpecGen emits <strong class="emphasis">Typescript</strong>
    and <strong class="emphasis">Java</strong> documents, along with the various Service Adapter and Application
    Specification Documents.
</p>

<hr/>

<h2>
    Using SpecGen
</h2>

<p>
    The following is a detailed description of how to invoke SpecGen (obsolete and deprecated options have been
    excluded):
</p>

<pre class="code"><code class="language-json" ngNonBindable>Usage: specgen [-dDFhPrStUvVw] [-a "@vmc"]
        [-b $&#123;HOME&#125;/ui] [-C "~/ui/src/components"] [-c "~/ui/src/config"] [-e "vmc"]
        [-G Calendar:Time] [-l typescript | java] [-n Base] [-p &lt;YAML folder&gt;] [-R ngw:NGW] [-s src/services]
        [-u $&#123;HOME&#125;/ui] [-y "-api-doc.yaml"] [parameters ...]

 -a, --alias="@vmc"                            Alias for imports
 -b, --root=$&#123;HOME&#125;/ui                         Project Root
 -C, --components-dir="$&#123;PWD&#125;/src/components"  Components folder (relative to project root)
 -c, --config-dir="$&#123;PWD&#125;/src/config"          Full path to AppGen configuration files
 -d, --debug                                   Debug Output
 -D, --no-disambiguate                         Don't append mangled URI to disambiguate service request
 -e, --extern="vmc"                            Extern YAML
 -F, --force                                   Force overwrite of spec files
 -G, --galactic=Calendar:Time                  Colon separated list of galactic services
 -h, --help                                    Display Help
 -l, --language=typescript | java              Codegen Language for Servgen and ApiGen
 -n, --namespace=Base                          Namespace prefix
 -p, --apiDir=&lt;YAML folder&gt;                    YAML folder  (relative to project root)
 -P, --proxy                                   Autogenerate proxy configuration
 -r, --recover                                 Continue on error
 -R, --rename-yaml=ngw:NGW
 -S, --no-services                             Don't generate artifacts for the services layer
 -s, --service-dir=src/services                Services root
 -t, --trace                                   Trace Output
 -U, --no-ui                                   Don't generate artifacts for the UI
 -u, --ui-root=$&#123;HOME&#125;/ui                      Root of UI tree
 -v, --verbose                                 Verbose Output
 -V, --version                                 Show Version
 -w, --no-warnings                             Turn off warnings
 -y, --yaml-suffix="-api-doc.yaml"             Suffix of YAML file names</code></pre>

<table class="table table-noborder flag-table">
    <thead>
    <tr>
        <th class="left flag-header">Flag</th>
        <th>Description</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="left flag">-a, | --alias="@vmc"</td>
        <td class="flag-value">
            Typescript only. Specifies a shortcut alias to be used for imports.
            Ignored in Java.
        </td>
    </tr>
    <tr>
        <td class="left flag">-b &lt;path&gt; | --root=&lt;path&gt;</td>
        <td class="flag-value">This option declares the absolute path to the root of the Project directory. All
            subsequent location
            specifications are relative to this root path. If this option is skipped, SpecGen defaults to <strong
                class="emphasis">$&#123;HOME&#125;/ui</strong> for
            historical reasons. Path specifications may include the "<code class="clr-code">~</code>" (tilde) character which will be replaced by the <strong
                class="emphasis">HOME</strong>
            folder of the invoking user, or "<code class="clr-code">~&lt;user&gt;</code>", which will be replaced by
            the <strong class="emphasis">HOME</strong> folder of the specified
            <strong class="emphasis">&lt;user&gt;.</strong>
        </td>

    </tr>
    <tr>
        <td class="left flag">-C | --app-component</td>
        <td class="flag-value">
            Typescript/Angular only. Autogeneration of "app/app.component.ts" for the component with autoinstantiation
            of references to operations for all used services and inheritance chain. If the file already exists,
            <strong class="emphasis">-F | --force</strong> will be required to overwrite it.
        </td>
    </tr>
    <tr>
        <td class="left flag">-c &lt;path&gt; | --config-dir=&lt;path&gt;</td>
        <td class="flag-value">
            This option specifies the path to the directory where the Application Configuration
            Documents reside. This is an absolute (not relative) path to the folder.
        </td>
    </tr>
    <tr>
        <td class="left flag">-d | --debug</td>
        <td class="flag-value">
            Used by SpecGen developers to emit debug output.
        </td>
    </tr>
    <tr>
        <td class="left flag">-F | --force</td>
        <td class="flag-value">
            This option is used to specify that even customized files will be overwritten on execution.
            Use with caution. This is mainly for use by developers.
        </td>
    </tr>
    <tr>
        <td class="left flag">-H | --app-html</td>
        <td class="flag-value">
            Typescript/Angular only. Autogeneration of "app.component.html" for the component with its selector. If the file already exists,
            <strong class="emphasis">-F | --force</strong> will be required to overwrite it.
        </td>
    </tr>
    <tr>
        <td class="left flag">-h | --help</td>
        <td class="flag-value">
            Displays all the options recognized by SpecGen.
        </td>
    </tr>
    <tr>
        <td class="left flag">-i &lt;path&gt; | --interface-dir=&lt;path&gt;</td>
        <td class="flag-value">
            This option specifies the path to the directory where the Service Adapter Interface
            Documents from <strong class="emphasis">ServGen</strong> reside, relative to the project root.
        </td>
    </tr>

    <tr>
        <td class="left flag">-l "typescript" | --language="typescript"</td>
        <td class="flag-value">
            This option is used to specify the language plugin to be used for the output from SpecGen. Currently, the only
            valid plugin is: <strong class="emphasis">typescript</strong>.
        </td>
    </tr>

    <tr>
        <td class="left flag">-n | --not-vmc</td>
        <td class="flag-value">
            All projects other than VMC-ui should use this flag to prevent the inclusion of <code class="clr-code">TestUtil</code>
            and <code class="clr-code">UserUtil</code> in autogenerated tests.
        </td>
    </tr>
    <tr>
        <td class="left flag">-O "src/components/abstractions" | --components-dir="src/components/abstractions"</td>
        <td class="flag-value">
            This specifies the path to the root of the output folder where abstract parents for components that only
            use a single service reside. When a component uses more than one service, a combined services abstract parent
            is autogenerated in the component's folder.
        </td>
    </tr>
    <tr>
        <td class="left flag">-o "src/components" | --components-dir="src/components"</td>
        <td class="flag-value">
            This specifies the path to the root of the output folder within which sub folders for
            each component will be autogenerated.
        </td>
    </tr>

    <tr>
        <td class="left flag">-r | --recover</td>
        <td class="flag-value">
            Used by SpecGen developers to continue processing even when a fatal error is encountered.
        </td>
    </tr>

    <tr>
        <td class="left flag">-t | --trace</td>
        <td class="flag-value">
            Used by SpecGen developers to emit trace level output.
        </td>
    </tr>

    <tr>
        <td class="left flag">-V | --version</td>
        <td class="flag-value">
            Displays SpecGen version.
        </td>
    </tr>

    <tr>
        <td class="left flag">-v | --verbose</td>
        <td class="flag-value">
            Used by SpecGen developers to emit verbose level output.
        </td>
    </tr>

    <tr>
        <td class="left flag">-w | --no-warnings</td>
        <td class="flag-value">
            option suppresses warning from SpecGen (not recommended, except while debugging, and overwhelmed by a stream
            of warnings).
        </td>
    </tr>

    </tbody>
</table>


<hr/>

<h2>
   Example Use
</h2>

<h3>
    VMC UI
</h3>
<pre class="code"><code class="language-bash" ngNonBindable>specgen
    --proxy
    -p src/services/api
    --config-dir=~/vmc/src/config
    -C src/components
    --root=~/vmc
    --service-dir=src/services
    vmc
</code></pre>

<h3>
    AppFabric Java Sample using VMC YAML
</h3>
<pre class="code"><code class="language-bash" ngNonBindable> specgen -l java
    --alias=@vmc
    --config-dir=~/appfabric/java/src/main/java/samples/config
    -p src/main/java/samples/api
    --root=~/appfabric/java
    --service-dir=src/main/java/samples/services
    vmc
</code></pre>
