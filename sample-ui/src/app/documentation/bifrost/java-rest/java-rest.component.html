<appfab-java-badges></appfab-java-badges>
<h1>Making RESTful API Requests</h1>

<p>
  At some point (pretty quickly) you will need to start making remote calls to APIs in order to do interesting things.
</p>
<p>
  The Bifröst provides a built-in service that abstracts the need to be concerned with handling HTTP operations. The Java version of the RestService is a little
  more advanced than the TypeScript version.
</p>
<p>
  The Java version of <code class="clr-code">RestService</code> knows how to make remote calls to external URIs, as well as knowing how to make calls to local
  Rest Controllers in your existing application. If the URI is local to your Java application, the RestService will <strong>Look up your Rest Controller using reflection</strong>
  and ensure it's a match. Once the local controller has been found, the RestService will <strong class="emphasis">call your controller locally</strong>. This means
  all existing security is also honoured and evaluated, there is also no additional network hop.
</p>
<p>
  The <code class="clr-code">RestService</code> provides operations for <code class="clr-code">GET, PUT, POST,
  PATCH</code> and <code class="clr-code">DELETE</code> RESTful RPC calls.
  It can be called from your service when you extend from <code class="clr-code">AbstractService</code>. It can also
  be called from your class when you extend from
  <code class="clr-code">AbstractBase</code>.
</p>

<hr/>

<h3>Loading the RestService</h3>

<p>
  The RestService is automatically loaded when the Bifröst boots. There is no need to instantiate it manually
</p>
<p>
  In Angular applications, this would be in your <code class="clr-code">main.ts</code> file. Like with Services you build yourself, you would use the
  <code class="clr-code">ServiceLoader</code> to instantiate and boot the <code class="clr-code">RestService</code> and start it listening for requests.
</p>

<h3>Calling RestService from a Java Class</h3>

<p>
  When your service extends from <code class="clr-code">AbstractBase</code> or  <code class="clr-code">AbstractService</code>, a method named <code class="clr-code">restServiceRequest()</code>
  is provided. There are a couple of overloaded versions of the method, however we will focus on the main one.
</p>

<pre class="code"><code class="language-java" ngNonBindable>/**
 * Used By RestService to convert an incoming request into a RestOperation.
 * @param &lt;Payld&gt; The Request Payload Type (what is being sent)
 * @param &lt;Resp&gt; The Response Payload Type (what we're expecting back)
 */
public class RestOperation&lt;Payld, Resp&gt; &#123;
    @Getter @Setter
    private UUID id;

    @Getter @Setter
    private URI uri;

    @Getter @Setter
    private HttpMethod method;

    @Getter @Setter
    private Payld body;

    @Getter @Setter
    private String apiClass;

    @Getter @Setter
    private Map&lt;String,String&gt; headers;

    @Getter @Setter
    private String sentFrom;

    @Getter @Setter
    private Consumer&lt;Resp&gt; successHandler;

    @Getter @Setter
    private Consumer&lt;RestError&gt; errorHandler;
&#123;

/**
 * Make a new RestService call.
 *
 * @param operation RestOperation for call Encapsulates individual argument calls.
 * @param &lt;Req&gt;     Type of the payload being sent.
 * @param &lt;Resp&gt;    Type of the response being returned.
 */
protected &lt;Req, Resp> void restServiceRequest(RestOperation&lt;Req, Resp&gt; operation);</code></pre>

<hr/>

<p>
  Let's create a simple service called <code class="clr-code">CloudServicesStatus</code> that calls a remote API via the
  <code class="clr-code">RestService</code> to check the status of VMware Cloud Services as an example.
</p>
