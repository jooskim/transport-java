<h1>Getting Started with the Application Fabric.</h1>

<p>
    The quickest way to get a simple app up and running is to use <strong class="emphasis">Application Fabric CLI (AF CLI)</strong> to
    build an entire, ready to run application, that comes with a sample API contract or initializes with the OpenAPI document you provide
    as a flag. For full documentation, head over to the <a href="https://gitlab.eng.vmware.com/autogen/appfabric-init" target="_blank">
    README page of the AF CLI project</a>
</p>
<hr/>
<div class="alert alert-info" role="alert">
    <div class="alert-items">
        <div class="alert-item static">
            <span class="alert-text">
                ðŸ‘‰ You will <strong>need to have NodeJS 10+, JDK 8, 10 or 11 and Gradle 4.6+</strong> in order to build using the CLI ðŸ‘ˆ
            </span>
        </div>
    </div>
</div>


<hr/>

<h1>First, watch this short video ðŸ‘‡</h1>
<iframe src="https://video.eng.vmware.com/videos_embed/application-fabric-getting-started" class="video"
        allowfullscreen="allowfullscreen"></iframe>

<h2>Step 1: Grab the AF CLI</h2>

<p>
    Don't worry, you don't need to mount anything or set up a bunch of environmental variables. Just run the following commands
    that match your operating system.
</p>

<h4>macOS</h4>

<pre class="code"><code class="language-shell" ngNonBindable>curl -LO https://build-artifactory.eng.vmware.com/sewing-machine-bin-dist-generic-local/appfabinit/v0.1.12/darwin/af \
&& sudo mv af /usr/local/bin/ && sudo chmod +x /usr/local/bin/af</code></pre>

<h4>Linux</h4>

<pre class="code"><code class="language-shell" ngNonBindable>curl -LO https://build-artifactory.eng.vmware.com/sewing-machine-bin-dist-generic-local/appfabinit/v0.1.12/linux/af \
&& sudo mv af /usr/local/bin/ && sudo chmod +x /usr/local/bin/af</code></pre>

<h4>Windows</h4>

<a href="https://build-artifactory.eng.vmware.com/sewing-machine-bin-dist-generic-local/appfabinit/v0.1.12/windows/af.exe" target="_blank">Download</a>

<hr/>
<h2>Step 2: Create a new full stack fabric application</h2>

<p>
   We have everything we need to build a new front-end and backend.
</p>

<h4>Build a new full stack application named MyNewApp with a sample OpenAPI document</h4>

<pre class="code"><code class="language-shell" ngNonBindable>cd ~ && af build-all --ui-name MyNewApp</code></pre>

<hr/>
<h2>Step 3: Build and deploy backend</h2>

<h4>Change into your new app folder</h4>

<pre class="code"><code class="language-shell" ngNonBindable>cd ~/MyNewApp</code></pre>

<h4>Build the backend</h4>

<pre class="code"><code class="language-shell" ngNonBindable>./scripts/build-server.sh</code></pre>


<h4>Run the backend</h4>

<pre class="code"><code class="language-shell" ngNonBindable>gradle bootRun</code></pre>

<hr/>
<h2>Step 4: Build and deploy UI</h2>

<h4>Change into your new app ui folder</h4>

<pre class="code"><code class="language-shell" ngNonBindable>cd ~/MyNewApp/ui</code></pre>

<h4>Run NPM install</h4>

<pre class="code"><code class="language-shell" ngNonBindable>npm install</code></pre>


<h4>Build and run the UI</h4>

<pre class="code"><code class="language-shell" ngNonBindable>npm start</code></pre>

<h3>ðŸ‘‰ Check out <strong class="emphasis">http://localhost:4200</strong> ðŸ‘ˆ</h3>

<hr/>

<h1>
    What Now?
</h1>

<p>
    You can go ahead and build out a new feature or consume a stream using the available samples in your app. We have created some videos that show you how.
</p>
<clr-accordion>
    <clr-accordion-panel>
        <clr-accordion-title>Building a feature</clr-accordion-title>
        <clr-accordion-content *clrIfExpanded>
            <iframe src="https://video.eng.vmware.com/videos_embed/application-fabric-building-features" class="video"
                    allowfullscreen="allowfullscreen"></iframe>
            <h3>Building features with the application fabric</h3>
            <p>
                This video demonstrates how easy it is to build new features when using the auto-generated operations
                provided by the sewing machine.
            </p>
        </clr-accordion-content>
    </clr-accordion-panel>

    <clr-accordion-panel>
        <clr-accordion-title>Consuming streams</clr-accordion-title>
        <clr-accordion-content *clrIfExpanded>
            <iframe src="https://video.eng.vmware.com/videos_embed/application-fabric-using-and-consuming-streams"
                    class="video" allowfullscreen="allowfullscreen"></iframe>
            <h3>Using and consuming streams</h3>
            <p>
                This video demonstrates how simple it is to wire up streams of data coming from your backend or message
                broker.
            </p>

        </clr-accordion-content>
    </clr-accordion-panel>

</clr-accordion>

<hr/>

<h2>Want to check out an existing application to play around instead?</h2>

<p>
    If you want to get up and running fast without building a new app - you can check out this UI and demo fabric instance and have this entire
    UI and fabric instance running locally on your developer machine in couple of minutes.
</p>

<hr/>
<h3>
    1. First, check out the source.
</h3>
<p>
    Everything is in gitlab, no Perforce here. All you need to do is check it out.
</p>
<pre class="code"><code class="language-shell" ngNonBindable>git clone git@gitlab.eng.vmware.com:bifrost/java.git appfabric</code></pre>
<hr/>

<h3>
    2. Build Fabric & UI
</h3>
<p>
    Once you have the source, cd into <code class="clr-code">appfabric</code> and run the <code class="clr-code">build.sh</code> script.
</p>
<pre class="code"><code class="language-shell" ngNonBindable>cd appfabric && ./build.sh</code></pre>

<hr/>

<h3>
    3. Boot!
</h3>
<p>
    Once everything has finished building, you have two choices with booting, first option is you can run the
    UI and fabric container manually, or you can use Docker to boot ready to go containers instead.
</p>

<h4>Booting fabric manually</h4>
<pre class="code"><code class="language-shell" ngNonBindable>cd java && ./runme.sh</code></pre>

<h4>Booting UI manually</h4>
<pre class="code"><code class="language-shell" ngNonBindable>cd sample-ui && npm start</code></pre>

<p>Now you should be able hit <strong class="emphasis">http://localhost:4200</strong> and you will see this site.</p>
<hr/>

<h4>Build everything via Docker</h4>
<pre class="code"><code class="language-shell" ngNonBindable>docker-compose -f docker-compose.local.yaml build</code></pre>

<h4>Run everything via Docker</h4>
<pre class="code"><code class="language-shell" ngNonBindable>docker-compose -f docker-compose.local.yaml up</code></pre>
<p>
    Once docker has booted, hit <strong class="emphasis">http://localhost</strong> (UI container comes up on port 80)
</p>
<hr/>
