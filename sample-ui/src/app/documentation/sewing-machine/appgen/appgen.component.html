<h1>AppGen - CLI</h1>

<h3>The Application Generation Engine</h3>

<p>
    In the suite of components that make up the <strong class="emphasis">Intent Compiler</strong> we call <strong
    class="emphasis">Sewing Machine</strong>, the role of <strong class="emphasis">AppGen</strong> is to combine
    the Application Specification Documents in <strong class="emphasis">config-dir</strong> with the models and operations
    output by <strong class="emphasis">ModelGen</strong> to instantiate an executable application, with stubs for rendering
    in supported UI frameworks, such as <strong class="emphasis">Angular</strong> and <strong class="emphasis">React</strong>.
    This component is also the 5th stage of the compilerâ€™s pipeline.
</p>

<hr/>

<h2>
    Specifications and Languages
</h2>

<p>
    <strong class="emphasis">AppGen</strong> instantiates Application Components and abstractions that provide autogenerated
    bindings to <strong class="emphasis">ModelGen</strong>'s models and operations, and modifies the various framework
    files to provide an execute-ready application. <strong class="emphasis">AppGen</strong> adds hooks to the generated
    applications to trivially invoke all Service Adapters that it needs, as well as hooks to quickly render response
    models.

</p>
<p>
    At the time of writing this, <strong class="emphasis">AppGen</strong> outputs applications using
    <strong class="emphasis">Typescript</strong> and <strong class="emphasis">Angular</strong>, however,
    because of the <strong class="emphasis">plugin</strong>
    architecture employed by all <strong class="emphasis">Sewing Machine</strong> components, additional languages and frameworks
    can be supported with relative ease.
</p>

<hr/>

<h2>
    Using AppGen
</h2>

<p>
    The following is a detailed description of how to invoke AppGen (obsolete and deprecated options have been
    excluded):
</p>

<pre class="code"><code class="language-json" ngNonBindable>Usage: appgen2 [-ACdFHhnrtvVw] [-a "@vmc"] [-b $&#123;HOME&#125;/ui]
                [-c "$&#123;PWD&#125;/src/config"] [-i value] [-l typescript | java]
                [-O "src/components/abstractions"]

 -a, --alias="@vmc"                    Alias for imports
 -A, --app-modules                     Insert components into app.modules
 -b, --root=$&#123;HOME&#125;/ui                 Project Root
 -C, --app-component                   Autogenerate the app component
 -c, --config-dir="~/ui/src/config"    Full path to Appgen configuration files
 -d, --debug                           Debug Output
 -F, --force                           Force Overwrite
 -H, --app-html                        Insert component selector into app.component.html
 -h, --help                            Display Help
 -i, --interface-dir=value             Directory for autogenerated service interface YAMLs relative to servicedir
 -l, --language=typescript | java      Codegen Language
 -n, --not-vmc                         Don't autogenerate for VMC
 -o, --components-dir="src/components" Folder for components
 -O, --operations-dir="src/components/abstractions"   Folder for default operations
 -r, --recover                         Continue on error
 -t, --trace                           Trace Output
 -v, --verbose                         Verbose Output
 -V, --version                         Show Version
 -w, --no-warnings                     Turn off warnings</code></pre>

<table class="table table-noborder flag-table">
    <thead>
    <tr>
        <th class="left flag-header">Flag</th>
        <th>Description</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="left flag">-A, | --app-modules</td>
        <td class="flag-value">
            Typescript/Angular only. Updates "app.modules.ts" with the new component(s).
        </td>
    </tr>
    <tr>
        <td class="left flag">-a, | --alias="@vmc"</td>
        <td class="flag-value">
            Typescript only. Specifies a shortcut alias to be used for imports.
            Ignored in Java.
        </td>
    </tr>
    <tr>
        <td class="left flag">-b &lt;path&gt; | --root=&lt;path&gt;</td>
        <td class="flag-value">This option declares the absolute path to the root of the Project directory. All
            subsequent location
            specifications are relative to this root path. If this option is skipped, AppGen defaults to <strong
                class="emphasis">$&#123;HOME&#125;/ui</strong> for
            historical reasons. Path specifications may include the "<code class="clr-code">~</code>" (tilde) character which will be replaced by the <strong
                class="emphasis">HOME</strong>
            folder of the invoking user, or "<code class="clr-code">~&lt;user&gt;</code>", which will be replaced by
            the <strong class="emphasis">HOME</strong> folder of the specified
            <strong class="emphasis">&lt;user&gt;.</strong>
        </td>

    </tr>
    <tr>
        <td class="left flag">-C | --app-component</td>
        <td class="flag-value">
            Typescript/Angular only. Autogeneration of "app/app.component.ts" for the component with autoinstantiation
            of references to operations for all used services and inheritance chain. If the file already exists,
            <strong class="emphasis">-F | --force</strong> will be required to overwrite it.
        </td>
    </tr>
    <tr>
        <td class="left flag">-c &lt;path&gt; | --config-dir=&lt;path&gt;</td>
        <td class="flag-value">
            This option specifies the path to the directory where the Application Configuration
            Documents reside. This is an absolute (not relative) path to the folder.
        </td>
    </tr>
    <tr>
        <td class="left flag">-d | --debug</td>
        <td class="flag-value">
            Used by AppGen developers to emit debug output.
        </td>
    </tr>
    <tr>
        <td class="left flag">-F | --force</td>
        <td class="flag-value">
            This option is used to specify that even customized files will be overwritten on execution.
            Use with caution. This is mainly for use by developers.
        </td>
    </tr>
    <tr>
        <td class="left flag">-H | --app-html</td>
        <td class="flag-value">
            Typescript/Angular only. Autogeneration of "app.component.html" for the component with its selector. If the file already exists,
            <strong class="emphasis">-F | --force</strong> will be required to overwrite it.
        </td>
    </tr>
    <tr>
        <td class="left flag">-h | --help</td>
        <td class="flag-value">
            Displays all the options recognized by AppGen.
        </td>
    </tr>
    <tr>
        <td class="left flag">-i &lt;path&gt; | --interface-dir=&lt;path&gt;</td>
        <td class="flag-value">
            This option specifies the path to the directory where the Service Adapter Interface
            Documents from <strong class="emphasis">ServGen</strong> reside, relative to the project root.
        </td>
    </tr>

    <tr>
        <td class="left flag">-l "typescript" | --language="typescript"</td>
        <td class="flag-value">
            This option is used to specify the language plugin to be used for the output from AppGen. Currently, the only
            valid plugin is: <strong class="emphasis">typescript</strong>.
        </td>
    </tr>

    <tr>
        <td class="left flag">-n | --not-vmc</td>
        <td class="flag-value">
            All projects other than VMC-ui should use this flag to prevent the inclusion of <code class="clr-code">TestUtil</code>
            and <code class="clr-code">UserUtil</code> in autogenerated tests.
        </td>
    </tr>
    <tr>
        <td class="left flag">-O "src/components/abstractions" | --components-dir="src/components/abstractions"</td>
        <td class="flag-value">
            This specifies the path to the root of the output folder where abstract parents for components that only
            use a single service reside. When a component uses more than one service, a combined services abstract parent
            is autogenerated in the component's folder.
        </td>
    </tr>
    <tr>
        <td class="left flag">-o "src/components" | --components-dir="src/components"</td>
        <td class="flag-value">
            This specifies the path to the root of the output folder within which sub folders for
            each component will be autogenerated.
        </td>
    </tr>

    <tr>
        <td class="left flag">-r | --recover</td>
        <td class="flag-value">
            Used by AppGen developers to continue processing even when a fatal error is encountered.
        </td>
    </tr>

    <tr>
        <td class="left flag">-t | --trace</td>
        <td class="flag-value">
            Used by AppGen developers to emit trace level output.
        </td>
    </tr>

    <tr>
        <td class="left flag">-V | --version</td>
        <td class="flag-value">
            Displays AppGen version.
        </td>
    </tr>

    <tr>
        <td class="left flag">-v | --verbose</td>
        <td class="flag-value">
            Used by AppGen developers to emit verbose level output.
        </td>
    </tr>

    <tr>
        <td class="left flag">-w | --no-warnings</td>
        <td class="flag-value">
            option suppresses warning from AppGen (not recommended, except while debugging, and overwhelmed by a stream
            of warnings).
        </td>
    </tr>

    </tbody>
</table>


<hr/>

<h2>
   Example Use
</h2>

<h3>
    VMC UI
</h3>
<pre class="code"><code class="language-bash" ngNonBindable>appgen2 --alias=@vmc --config-dir=~/ui/src/config
        -b ~/ui -i src/services/interfaces -O src/components/abstractions</code></pre>



<h3>
    AppFabric Sample
</h3>
<pre class="code"><code class="language-bash" ngNonBindable> appgen2 --config-dir=~/go/src/appfabinit/app-fabric-sample/ui/src/config
        -b ~/go/src/appfabinit/app-fabric-sample/ui
        -i ~/go/src/appfabinit/app-fabric-sample/ui/src/services/interfaces
        -O src/components/abstractions
        --alias=@vmw/appfabric-sample
</code></pre>
